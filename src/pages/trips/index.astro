---
/**
 * Trips List Page
 *
 * Displays all trips for the authenticated user.
 * Features:
 * - Paginated list of trips
 * - Status filtering
 * - Empty state for new users
 * - Authentication required (enforced by middleware)
 * - i18n support
 */

import Layout from "@/layouts/Layout.astro";
import { TripsList } from "@/components/trips/TripsList";
---

<Layout title="Moje plany - Magic Travel App">
  <main class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
    {/* Header */}
    <div class="mb-8 flex items-center justify-between">
      <div>
        <h1 class="text-3xl font-bold text-gray-900" data-i18n="trips.title">Moje plany</h1>
        <p class="mt-2 text-sm text-gray-600" data-i18n="navigation.my_trips">
          Zarządzaj i przeglądaj wszystkie swoje plany podróży
        </p>
      </div>
      <a
        href="/trips/new"
        class="inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
        data-i18n="trips.create_new"
      >
        <svg class="mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M12 4v16m8-8H4"></path>
        </svg>
        Nowa podróż
      </a>
    </div>

    {/* Trips List Component */}
    <TripsList client:load />
  </main>

  <script>
    import { t, getLocaleFromStorage } from "@/i18n";
    import type { TranslationKey } from "@/i18n";

    const locale = getLocaleFromStorage();

    // Translate all elements with data-i18n attribute
    document.querySelectorAll("[data-i18n]").forEach((element) => {
      const key = element.getAttribute("data-i18n");
      if (key) {
        element.textContent = t(key as TranslationKey, locale);
      }
    });
  </script>
</Layout>
