---
/**
 * Signup Page
 *
 * User registration page using Supabase Auth.
 * Features:
 * - Server-side session check (redirect if logged in)
 * - Support for redirect parameter
 * - Email/Password registration form
 */

import Layout from '@/layouts/Layout.astro';
import { SignupForm } from '@/components/forms/SignupForm';

// Server-side check: if user already logged in, redirect to dashboard
// Note: This requires middleware setup to work properly
// For now, we'll handle this client-side in the component

// Get redirect URL from query params
const url = new URL(Astro.request.url);
const redirectTo = url.searchParams.get('redirect') || '/trips';
---

<Layout title="Utwórz konto - VibeTravels">
  <main class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-blue-50 flex items-center justify-center px-4 py-12 sm:px-6 lg:px-8">
    <div class="w-full max-w-md">
      {/* Header */}
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-gray-900">Utwórz konto</h1>
        <p class="mt-2 text-sm text-gray-600">
          Zacznij planować swoje wymarzone podróże
        </p>
      </div>

      {/* Signup Form Card */}
      <div class="bg-white rounded-lg shadow-xl p-8 border border-gray-200">
        <SignupForm client:only="react" redirectTo={redirectTo} />
      </div>

      {/* Footer Links */}
      <div class="mt-6 text-center">
        <p class="text-sm text-gray-600">
          Masz już konto?{' '}
          <a href="/auth/login" class="text-blue-600 hover:text-blue-700 font-semibold transition-colors">
            Zaloguj się
          </a>
        </p>
      </div>

      <div class="mt-4 text-center">
        <a href="/" class="text-sm text-gray-500 hover:text-gray-700 transition-colors">
          ← Wróć do strony głównej
        </a>
      </div>
    </div>
  </main>
</Layout>
