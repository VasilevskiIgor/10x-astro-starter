---
/**
 * Reset Password Page
 *
 * New password setup page (accessed via email link).
 * Features:
 * - Token validation from URL
 * - New password form
 * - Redirect to login after success
 */

import Layout from '@/layouts/Layout.astro';
import { ResetPasswordForm } from '@/components/forms/ResetPasswordForm';

// Get token from URL
const url = new URL(Astro.request.url);
const accessToken = url.searchParams.get('access_token');
const type = url.searchParams.get('type');

// Check if this is a recovery link
if (!accessToken || type !== 'recovery') {
  return Astro.redirect('/auth/login?error=invalid_token');
}
---

<Layout title="Ustaw nowe hasło - VibeTravels">
  <main class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-blue-50 flex items-center justify-center px-4 py-12 sm:px-6 lg:px-8">
    <div class="w-full max-w-md">
      {/* Header */}
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-gray-900">Ustaw nowe hasło</h1>
        <p class="mt-2 text-sm text-gray-600">
          Wprowadź nowe hasło do swojego konta
        </p>
      </div>

      {/* Reset Password Form Card */}
      <div class="bg-white rounded-lg shadow-xl p-8 border border-gray-200">
        <ResetPasswordForm client:only="react" accessToken={accessToken} />
      </div>
    </div>
  </main>
</Layout>
